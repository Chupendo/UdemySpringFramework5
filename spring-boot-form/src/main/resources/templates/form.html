<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
 	<!-- Required meta tags -->
    <meta charset="ISO-8859-1">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

<title>Insert title here</title>
</head>
<body>
	<h3 th:text="${titulo}">Título principal de la página</h3>
	<form th:action="@{/form}" method="post" th:object="${user}">
		<label for="identificador">Identificador</label>
		<div>
			<input id="identificador" type="text" th:field="*{identificador}" />
		</div>
		<div th:if="${#fields.hasErrors('identificador')}"
			th:errors="*{identificador}"></div>

		<label for="names">Nombre</label>
		<div>
			<input id="names" type="text" th:field="*{nombre}" />
		</div>
		<div th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></div>

		<label for="apellido">Apellido</label>
		<div>
			<input id="apellido" type="text" th:field="*{apellido}" />
		</div>
		<div th:if="${#fields.hasErrors('apellido')}" th:errors="*{apellido}"></div>

		<label for="username">Username</label>
		<div>
			<input id="username" type="text" th:field="*{username}" />
		</div>
		<!--  Mostramos el mensaje de error (que es un mapa) si exisitera, Opción map.get() -->
		<!--
		<div th:if="${error != null && error.containsKey('username')}"
			th:text="${error.get('username')}"></div>
		-->
		<!--  Mostramso el mensaje de error a través de un objeto utilidad o helper -->
		<div th:if="${#fields.hasErrors('username')}" th:errors="*{username}"></div>

		<label for="password">Password</label>
		<div>
			<input name="password" id="password" type="password" />
		</div>
		<!--  Mostramos el mensaje de error (que es un mapa) si exisitera, Opción map.key de Thymeleaf -->
		<!--  <div th:if="${error != null && error.containsKey('password')}"></div> -->
		<div th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>

		<label for="email">Email</label>
		<div>
			<input id="email" type="text" th:field="*{email}" />
		</div>

		<!--  <div th:if="${error != null && error.containsKey('email')}" th:text="${error.email}"></div> -->
		<div th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>

		<!-- Campo cuenta tipo numerico -->
		<label id="count">Cuenta</label>
		<div>
			<!--  <input id="count" type="text" th:field="*{cuenta}"/> -->
			<!--  captura como un string -->
			<input id="count" type="number" th:field="*{cuenta}" />
			<!--  captura como un number -->
			<div th:if="${#fields.hasErrors('cuenta')}" th:errors="*{cuenta}"></div>
		</div>

		<!--  Campo para captura la fecha de cumpleaños "birthday" como String/Date/Datetime-local-->
		<label id="date-birthday">Fecha de nacimiento:</label>
		<div>
			<!--  captura como un string -->
			<!-- 
			<input id="birthday" type="text" th:field="*{birthday}" placeholder="yyy/MM/dd HH:mm:ss" />
-->
			<!-- 
			<!--  captura como fecha: -->
			<!--  OPCION A: captura como un date: solo añade fecha, no añade horas, minutos y segundos -->
			<!-- 
			<input id="birthday" type="date" th:field="*{birthday}"/>
-->
			<input id="date-birthday" type="datetime-local"
				th:field="*{birthday}" step="1" />
			<!--  OPCION B: captura como un date: solo añade fecha, con horas, minutos y segundos -->
			<!--  			
			<input id="birthday" type="datetime-local" th:field="*{birthday}" step="1"/>
-->
			<!-- mostrar mensjae mensaje de error si falla al validar la fecha -->
			<div th:if="${#fields.hasErrors('birthday')}" th:errors="*{birthday}"></div>
		</div>

		<!-- Lista de paises -->
		<label id="listPaises">Pais:</label> <select id="listPaises"
			th:field="*{pais}">
			<!--<select id="listPaises" th:field="*{pais.codigo}"> -->
			<!-- Opcion por defecto -->
			<option value="">--seleccionar--</option>
			<!--  Por cada elemento de la lista "paises" lo añade a atributo "pais" y crea una opción, en la cual se va ha mostra el texto de "th:text" y se le va asociar el valor de "th:value"  -->
			<!--  Recorrer una array list de String -->
			<!--  <option th:each="pais: ${paises}" th:text="${pais}" th:value="${pais}"></option> -->
			<!--  Recorrer un mapa<stirng,string> -->
			<!--  <option th:each="pais: ${paisesMap.entrySet()}" th:text="${pais.value}" th:value="${pais.key}"></option> -->
			<!--  Recorrer un List<Pais> -->
			<!--<option th:each="pais: ${listaPaises}" th:text="${pais.nombre}" th:value="${pais.codigo}"></option>-->
			<!--  <option th:each="pais: ${listaPaises}" th:text="${pais.nombre}"
				th:value="${pais.id}"></option> -->
			<!--  Recorrer un List<Pais> con selecion por defecto -->
			<option th:each="pais: ${listaPaises}" th:text="${pais.nombre}"
				th:value="${pais.id}"></option>
			<!--  <option th:each="pais: ${listaPaises}" th:text="${pais.nombre}"
				th:value="${pais.id}" th:selected="*{pais} eq ${pais}"></option> -->
			<!--  Recorrer un List<Pais> con selecion por defecto -->
			<!-- <option th:each="pais: ${listaPaises}" th:text="${pais.nombre}"
				th:value="${pais.id}" th:selected="*{pais.id} eq ${pais.id}"></option> -->
		</select>
		<div th:if="${#fields.hasErrors('pais')}" th:errors="*{pais}"></div>
		<!--<div th:if="${#fields.hasErrors('pais.codigo')}" th:errors="*{pais.codigo}" ></div>-->

		<!-- Roles -->
		<!--  Lista de roles -->
		<!-- 
		<div>
			<label id="labelRoles" >Roles:</label>
 -->
		<!-- Recorremos la lista de roles -->
		<!-- 
			<div th:each="role:${listaRoles}">
-->
		<!-- Lo que se envia al backend-->
		<!-- 
				<input type="checkbox" th:field="*{roles}" th:value="${role}"/>
-->
		<!-- Lo que muestra el front, asocia el label con el input -->
		<!-- 
				<label th:text="${role}" th:for="${#ids.prev('roles')}"></label>
<!-- 
			</div>
			<div th:if="${#fields.hasErrors('roles')}" th:errors="*{roles}" ></div>		
		</div>

		<!--  Mapa de roles -->
		<!--
		<div>
			<label id="labelRoles" >Roles:</label>
-->
		<!-- Recorremos la lista de roles -->
		<!--
			<div th:each="role:${mapaRoles}">
-->
		<!-- Lo que se envia al backend-->
		<!--
				<input type="checkbox" th:field="*{roles}" th:value="${role.key}"/>
-->
		<!-- Lo que muestra el front, asocia el label con el input -->
		<!--
				<label th:text="${role.value}" th:for="${#ids.prev('roles')}"></label>
			</div>
			<div th:if="${#fields.hasErrors('roles')}" th:errors="*{roles}" ></div>
		</div>
-->
		<!--  Lista de Objetos de roles -->
		<div>
			<label id="objectsRoles">Roles:</label>
			<!-- Recorremos la lista de roles -->
			<div th:each="role:${objectsRoles}">
				<!-- Lo que se envia al backend (selección por defecto, comprueba si ${role} esta en la lista th:field="*{roles}" ) -->
				<!-- <input type="checkbox" th:field="*{roles}" th:value="${role.id}" /> -->
				<!-- Lo que se envia al backend (selección definia, comprueba si ${role} esta en la lista ${user.roles} ) -->
				<input type="checkbox" th:field="*{roles}" th:value="${role.id}"
					checked="${#lists.contains(user.roles,roles)}" />
				<!-- Lo que muestra el front, asocia el label con el input -->
				<label th:text="${role.nombre}" th:for="${#ids.prev('roles')}"></label>
			</div>
			<div th:if="${#fields.hasErrors('roles')}" th:errors="*{roles}"></div>
		</div>

		<!--  Genero usuario -->
		<!--  Radio button insertado manualmnete la opciones -->
		<!--
		<div>
			<label id="generoUser">Genero:</label> 
			<div>
				<input type="radio" id="generoUserInput_1" th:field="*{genero}" value="Hombre">
				<label for="generoUserInput_1">Hombre</label>
			</div>
			<div>
				<input type="radio" id="generoUserInput_2" th:field="*{genero}" value="Mujer">
				<label for="generoUserInput_2">Mujer</label>
			</div>
			 <div th:if="${#fields.hasErrors('genero')}" th:errors="*{genero}"></div>
		</div>
		-->
		<!--  Radio button insertado dinamicamente la opciones -->
		<div>
			<label id="generoUser">Genero:</label>
			<!--  Lista de Genero String -->
			<!-- 
			<div th:each="generoOption : ${generoOptionsList}">
				<input type="radio" name="generoList" th:field="*{genero}"
					th:value="${generoOption}"> <label
					for="${#ids.prev('genero')}" th:text="${generoOption}"></label>
			</div>
			<div th:if="${#fields.hasErrors('genero')}" th:errors="*{genero}"></div>
			 -->
			 
			<!--  Lista de Genero String -->
			<div th:each="generoOption : ${generoOptionsList}">
				<!-- <input type="radio" name="generoList" th:field="*{genero}"
					th:value="${generoOption}" th:checked="${generoOption == 'Hombre'}"> -->
				<input type="radio" name="generoList" th:field="*{genero}"
					th:value="${generoOption}"
					th:checked="*{genero} eq ${generoOption}"> <label
					for="${#ids.prev('genero')}" th:text="${generoOption}"></label>
			</div>
			<div th:if="${#fields.hasErrors('genero')}" th:errors="*{genero}"></div>

			<!--  Lista de Genero String -->
			<div th:each="generoOption : ${generoOptionsList}">
				<!-- <input type="radio" name="generoList" th:field="*{genero}"
					th:value="${generoOption}" th:checked="${generoOption == 'Hombre'}"> -->
				<input type="radio" name="generoList" th:field="*{genero}"
					th:value="${generoOption}"
					th:checked="${#lists.contains(generoOptionsList,user.genero)}">
				<label for="${#ids.prev('genero')}" th:text="${generoOption}"></label>
			</div>
			<div th:if="${#fields.hasErrors('genero')}" th:errors="*{genero}"></div>

			<!--  Mapa de Genero String -->
			<!--
			<div th:each="generoOption : ${generoOptionsMap}">
				<input type="radio" name="generoMap" th:field="*{genero}"
					th:value="${generoOption.key}"
					th:checked="*{genero} eq ${generoOption.key}"> <label
					for="${#ids.prev('genero')}" th:text="${generoOption.value}"></label>
			</div>
			-->
		</div>
		<!--  Habilitar/Deshabilitar usuario -->
		<div>
			<label id="enableUser">Hailibar/Deshabilitar Usuario:</label> <input
				type="checkbox" id="enableUser" th:field="*{habilitar}">
			<!--  este campo no se valida, por lo que no es necsairo un hasErrros del mismo -->
			<!-- <div th:if="${#fields.hasErrors('habilitar')}" th:errors="*{habilitar}"></div> -->
		</div>

		<!--  Habilitar/Deshabilitar 2 usuario -->
		<!-- <div>
			<label id="enableUser2">Hailibar/Deshabilitar Usuario:</label> <input
				type="checkbox" id="enableUser2" th:value="*{habilitar2}" th:field="*{habilitar2}">
		</div>
		-->
		<!-- Input no visible para el usuario en el formulario -->
		<div>
			<input type="hidden" th:field="*{valorSecreto}">
		</div>
		<div>
			<input value="Enviar" type="submit" />
		</div>
	</form>

	<!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
	
	
</body>
</html>